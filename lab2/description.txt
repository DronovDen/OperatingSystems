10 Определяет переменную now типа time_t.

11 Определяет указатель sp на struct tm.
struct tm {
    int tm_sec;    seconds after minute [0,61]
    int tm_min;    minutes after the hour [0,59]
    int tm_hour;   hour since midnight [0,23]
    int tm_mday;   day of the month [1,31]
    int tm_mon;    months since January [0,11]
    int tm_year;   years since 1900
    int tm_wday;   days since Sunday [0,6]
    int tm_yday;   days since January 1 [0,365]
    int tm_isdst;  flag for alternate daylight savings time
};

13-14 Установка переменной окружения TZ для последующего опеределения
      времени в этом часовом поясе
      putenv - добавляет или изменяет переменную окружения 
      возвращает ненулевое значение, если завершилось некорректно
      perror - выводит в стандартный поток ошибки сообщения, описывая ошибку, 
      произошедшую при последнем системном вызове или вызове библиотечной функции. 
      Номер ошибки извлекается из внешней переменной errno, 
      которая устанавливается в случае ошибки

15 Вызывается time.  Время в  секундах  от  00:00:00  UTC  1 января
   1970 сохраняется в переменной now.

16 Библиотечная функция ctime(3C) преобразовывает время в местное и форматирует его
   в ASCII-строку формата date(1) (Month Week Day H:M:S Year). 
   Функция ctime преобразует время в секундах из переменной now
   в строку с учетом часового пояса из перменной TZ. Адрес, возвращенный этой
   функцией, используется в качестве параметра printf для
   печати ASCII-строки.

18 Вызывается библиотечная функция localtime(3C). Эта функция заполняет значениями 
    поля структуры tm.
   Функция localtime() преобразует календарное время timep в локальное, определенное 
   в соответствии с заданной пользователем временной зоной. Функция работает так, как 
   будто она вызывает tzset(3), и устанавливает внешние переменные: tzname в значение 
   текущей временной зоны, timezone в значение разницы в секундах между всеобщим 
   скоординированным временем (UTC) и локальным стандартом времени и daylight в ненулевое значение, если используются
   стандартные правила "летнего" времени. Возвращаемое значение указывает на статически выделенную структуру, содержимое 
   которой может быть перезаписано последующими вызовами любых функций, работающих с датой и временем. 

20-23  Распечатываются значения полей структуры tm.

 - Нужно рассказать что такое переменная окружения
 - Переменные окружения — это переменные, определяемые для текущей оболочки(программа, предоставляющая интерфейс 
   для взаимодействия пользователя с функциями системы) и наследуемые любыми дочерними оболочками или процессами.

 - Изменится ли поведение вашего кода, если putenv выполнить после time? После ctime?
 - Если поставить после time, то не измениться, т.к time возвращает время с 1 января 1970 года, а преобразование
   на местное производится далее.
   Если поставить после ctime, то изменится, т.к ctime преобразовывает время на основании TZ, но значение переменной
   у процесса не было изменено. 
 
 - В каком формате осуществляется вывод?(perror)
 - Функция perror() создает сообщение, описывающее последнюю ошибку, обнаруженную во время вызова системной или библиотечной функции.
   Выводится строка аргумента s, за которой следует двоеточие и пробел, за которыми следует сообщение об ошибке из errno. 
   Номер ошибки хранится в переменной errno (определенной в файле errno.h). Доступ к системным сообщениям об
   ошибках осуществляется через переменную sys_errlist, которая представляет собой массив сообщений об ошибке, 
   отсортированный по номеру ошибки. perror выводит соответствующее сообщение об ошибке , используя значение переводятся
   в качестве индекса для sys_errlist.


Наиболее
употребительный формат значения TZ, применяемый в современных Unix-системах — это
имя файла в каталоге /usr/share/lib/zoneinfo/

Номер ошибки хранится в переменной errno (определенной в файле ERRNO.H). 
Доступ к системным сообщениям об ошибках осуществляется через переменную _sys_errlist,
которая представляет собой массив сообщений об ошибке, отсортированный по номеру ошибки.
perror выводит соответствующее сообщение об ошибке , используя значение переводятся в качестве
индекса для _sys_errlist. Значение переменной _sys_nerr определяется как максимальное число
элементов в массиве _sys_errlist .

:/usr/share/lib/zoneinfo

В файле /etc/adjtime хранится величина отклонения аппаратных часов и какое время они показывают, локальное или UTC.

Обычно аппаратные часы используются при загрузке для установки системного времени.
Это может быть осуществлено ядром самостоятельно, либо с помощью загрузочного сервиса init-скрипта при загрузке.
Завершение работы ядра или сервиса также может вызвать сохранение времени системных часов в аппаратные часы.
Благодаря этому у системы будет правильное время при следующей загрузке.